<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema CESFAM - Prescripciones</title>
  <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
  <!-- Encabezado con logo y título -->
  <header>
    <div class="logo">
      <div class="logo-img">
        <!-- Logo del sistema -->
        <img src="./image/telesalud-dark-2.27cc9379.svg" alt="Logo CESFAM">
      </div>
      <div class="logo-text">
        CESFAM <br> Farmacia
      </div>
    </div>
    <div class="header-title">
      Sistema de Gestión de Medicamentos
    </div>
  </header>

  <!-- Barra de Navegación con enlaces principales -->
  <nav>
    <ul class="nav-buttons">
      <li><a href="index.html" class="nav-btn">Inicio</a></li>
      <li><a href="login.html" class="nav-btn">Autenticación</a></li>
      <li><a href="stock.html" class="nav-btn">Gestión de Stock</a></li>
      <!-- Aquí se marca como seleccionada la página actual -->
      <li><a href="prescripciones.html" class="nav-btn-selected">Prescripciones</a></li>
      <li><a href="informes.html" class="nav-btn">Informes</a></li>
      <li><a href="ayuda.html" class="nav-btn">Ayuda</a></li>
    </ul>
  </nav>

  <!-- Contenido principal de la página -->
  <main class="main-container">
    <section>
      <h2>Prescripciones Médicas</h2>
      <p>Gestione y revise las recetas médicas de los pacientes:</p>
      <div class="opciones-princ">

        <!-- CU6: Revisar Stock Disponible -->
        <div class="opcion">
          <h3>Revisar Stock Disponible</h3>
          <form id="formStock">
            <!-- Campo para buscar medicamento -->
            <label for="buscarMedicamento">Buscar medicamento:</label><br>
            <input type="text" id="buscarMedicamento" placeholder="Ej: Paracetamol 500mg">
            
            <!-- Campo para definir tolerancia (%) -->
            <label for="tolerancia">Tolerancia (%):</label><br>
            <input type="number" id="tolerancia" min="0" max="100" value="95">
            
            <!-- Botón de acción -->
            <a href="#" class="btn-opcion" id="btnConsultar">Consultar</a>
          </form>
          <!-- Aquí se mostrarán los resultados -->
          <div id="resultadoStock"></div>
        </div>

        <!-- CU7: Ingresar Prescripción -->
        <div class="opcion">
          <h3>Generar Nueva Receta</h3>
          <form id="formPrescripcion">
            <!-- Datos del paciente -->
            <label for="rutPaciente">RUT Paciente:</label><br>
            <input type="text" id="rutPaciente" placeholder="Ej: 12345678-9" 
                   pattern="^\d{7,8}-[0-9Kk]$"
                   title="Ingrese RUT sin puntos, con guion y dígito verificador (0-9 o K)" required><br>

            <label for="nombrePaciente">Nombre Paciente:</label><br>
            <input type="text" id="nombrePaciente" placeholder="Ej: Juan Pérez" required><br>

            <!-- Detalles de la prescripción -->
            <label for="medicamento">Medicamento:</label><br>
            <input type="text" id="medicamento" placeholder="Ej: Paracetamol 500mg" required><br>

            <label for="dosis">Dosis:</label><br>
            <input type="text" id="dosis" placeholder="Ej: 1 tableta" required><br>

            <label for="frecuencia">Frecuencia:</label><br>
            <input type="text" id="frecuencia" placeholder="Ej: cada 8 hrs" required><br>

            <label for="duracion">Duración del tratamiento:</label><br>
            <input type="text" id="duracion" placeholder="Ej: 7 días" required><br>

            <!-- Botón para guardar la prescripción -->
            <a href="#" class="btn-opcion" id="btnGuardar">Guardar Prescripción</a>
          </form>
          <!-- Aquí se mostrarán mensajes (ej: éxito o error) -->
          <div id="msgPrescripcion"></div>
        </div>

        <!-- CU8: Emitir Receta en PDF -->
        <div class="opcion">
          <h3>Emitir Receta</h3>
          <form id="formReceta">
            <!-- Se busca paciente para emitir receta -->
            <label for="recetaPaciente">RUT Paciente:</label><br>
            <input type="text" id="recetaPaciente" placeholder="Ej: 12345678-K" 
                   pattern="^\d{7,8}-[0-9Kk]$"
                   title="Ingrese RUT sin puntos, con guion y dígito verificador (0-9 o K)" required><br>
            
            <!-- Botón para generar PDF -->
            <a href="#" class="btn-opcion" id="btnReceta">Generar Receta PDF</a>
          </form>
          <div id="msgReceta"></div>
        </div>

        <!-- Extra: Historial de paciente -->
        <div class="opcion">
          <h3>Historial de Paciente</h3>
          <!-- Botón para consultar historial -->
          <a href="#" class="btn-opcion" id="btnHistorial">Consultar</a>
          <div id="resultadoHistorial"></div>
        </div>

      </div>
    </section>
  </main>

  <!-- Pie de página con créditos -->
  <footer>
    <p>Desarrollado por <span class="developer">Equipo Caso 17 “Automatización Libreta de Medicamentos CESFAM”</span></p>
    <p>&copy; 2025 - Sistema CESFAM Farmacia - Derechos Reservados</p>
    <p>Ministerio de Salud - Chile</p>
  </footer>

  <!-- Librería jsPDF (para PDF) y JS propio -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="./js/prescripciones.js"></script>
</body>
</html>
